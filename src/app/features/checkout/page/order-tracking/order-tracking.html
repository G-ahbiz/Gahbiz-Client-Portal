<div class="order-tracking-page">
  <div class="container py-4 py-md-5">
    <!-- Page Header -->
    <div class="page-header text-start mb-4 mb-md-5">
      @if (orderId() && orderId() !== 'N/A') {
      <p class="text-muted fs-3 fw-semibold">
        {{ 'checkout.tracking.order-tracking' | translate }}:
        <span class="fw-semibold text-primary">#{{ orderId() }}</span>
      </p>
      }
    </div>

    <!-- Loading State -->
    @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Loading order details...</p>
    </div>
    }

    <!-- Error State -->
    @if (error() && !loading()) {
    <div class="alert alert-danger text-center mx-auto" style="max-width: 600px">
      <i class="bi bi-exclamation-triangle me-2"></i>
      {{ error() }}
    </div>
    }

    <!-- Status Message (for Created, Cancelled, Refunded) -->
    @if (!loading() && !error() && order() && !isOrderPaid()) {
    <div [class]="'alert text-center mx-auto ' + statusClass()" style="max-width: 800px">
      <i class="bi bi-info-circle me-2"></i>
      {{ statusMessage() | translate }}
    </div>
    }

    <!-- Content (shown when not loading and no error and order is paid) -->
    @if (!loading() && !error() && order() && isOrderPaid()) {
    <!-- Tracking Progress Bar -->
    <div class="tracking-section mb-5">
      <app-tracking-bar
        [currentStage]="currentTrackingStage()"
        [orderCreatedDate]="order()!.createdDate"
        [orderStatus]="order()!.status"
      ></app-tracking-bar>
    </div>

    <!-- Order Services Section -->
    <div class="order-services-section">
      <app-order-services [order]="order()"></app-order-services>
    </div>
    }
  </div>
</div>
